(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/comfireOrder/comfireOrder"],{"0163":function(e,t,n){"use strict";n.r(t);var o=n("e06e"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},5944:function(e,t,n){"use strict";n.r(t);var o=n("e4b9"),a=n("0163");for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("f256");var i,u=n("f0c5"),c=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=c.exports},c886:function(e,t,n){"use strict";(function(e){n("b6b9"),n("921b");o(n("66fd"));var t=o(n("5944"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e06e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){n.e("components/uni-nav-bar/uni-nav-bar").then(function(){return resolve(n("2ead"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("common/vendor").then(function(){return resolve(n("9c72"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("common/vendor").then(function(){return resolve(n("0efb"))}.bind(null,n)).catch(n.oe)},i=function(){n.e("common/vendor").then(function(){return resolve(n("3457"))}.bind(null,n)).catch(n.oe)},u={components:{uniNavBar:o,vanField:a,vanGoodsAction:r,vanGoodsActionButton:i},data:function(){return{nav:{top:0,height:0},is_open_socket:!1,phone:"",nickName:"",total:0,amount:0,order:[],remark:""}},created:function(){var t=e.getMenuButtonBoundingClientRect();this.nav.top=t.top,this.nav.height=t.height},mounted:function(){this.Init(),this.getUserAndPhone()},methods:{resetQuality:function(){var t=e.getStorageSync("recommend");if(t.length>0){for(var n in t)t[n].quality=0;e.setStorageSync("recommend",t)}},getUserAndPhone:function(){var t=e.getStorageSync("token"),n=e.getStorageSync("phone");this.nickName=t.nickName,this.phone=n},Init:function(){var t=e.getStorageSync("recommend");if(t.length>0)for(var n in t)t[n].quality>0&&(this.order.push(t[n]),this.total+=t[n].price*t[n].quality);console.log(this.order),this.amount=this.order.length},later:function(){var t=e.getStorageSync("token"),n=e.getStorageSync("phone");if(!t)return e.showToast({title:"请先授权登录",duration:2e3,icon:"none"}),void setTimeout((function(){e.reLaunch({url:"../me/me"})}),2e3);if(!n)return e.showToast({title:"请完善个人信息",duration:2e3,icon:"none"}),void setTimeout((function(){e.reLaunch({url:"../me/me"})}),2e3);var o=this.getCacheData(),a=e.getStorageSync("tableNum");e.request({url:"http://129.211.13.120:3000/ordering/wx/addOrder/later",method:"POST",data:{order:o,tableNum:a,total:this.total,name:this.nickName,phone:this.phone},success:function(e){console.log(e.data)}}),this.resetQuality(),e.navigateTo({url:"../evaluate/evaluate"})},atOnce:function(){this.$goEasy.publish({channel:"my_channel",message:"有新订单到~~"});var t=e.getStorageSync("token"),n=e.getStorageSync("phone");if(!t)return e.showToast({title:"请先授权登录",duration:2e3,icon:"none"}),void setTimeout((function(){e.reLaunch({url:"../me/me"})}),2e3);if(!n)return e.showToast({title:"请完善个人信息",duration:2e3,icon:"none"}),void setTimeout((function(){e.reLaunch({url:"../me/me"})}),2e3);var o=this.getCacheData(),a=e.getStorageSync("tableNum");e.request({url:"http://129.211.13.120:3000/ordering/wx/addOrder/atOnce",method:"POST",data:{order:o,tableNum:a,total:this.total,name:this.nickName,phone:this.phone},success:function(e){console.log(e.data)}}),this.resetQuality(),e.navigateTo({url:"../evaluate/evaluate"})},getCacheData:function(){var t=[],n=e.getStorageSync("recommend");if(n.length>0)for(var o in n)n[o].quality>0&&t.push(n[o]);return t},goback:function(){e.navigateBack()}}};t.default=u}).call(this,n("543d")["default"])},e4b9:function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}))},f256:function(e,t,n){"use strict";var o=n("facc"),a=n.n(o);a.a},facc:function(e,t,n){}},[["c886","common/runtime","common/vendor"]]]);